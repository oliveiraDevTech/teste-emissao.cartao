{
  "ApplicationSettings": {
    "ServiceName": "CartaoAPI",
    "ServiceVersion": "1.0.0",
    "Environment": "Production"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Information"
    },
    "Serilog": {
      "MinimumLevel": "Information",
      "WriteTo": [
        {
          "Name": "Console",
          "Args": {
            "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] {Message:lj}{NewLine}{Exception}"
          }
        },
        {
          "Name": "File",
          "Args": {
            "path": "logs/cartao-api-.txt",
            "rollingInterval": "Day",
            "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz}] [{Level:u3}] {Message:lj}{NewLine}{Exception}"
          }
        }
      ],
      "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=cadastro_clientes.db;"
  },
  "Security": {
    "Jwt": {
      "Secret": "sua_chave_super_secreta_com_minimo_32_caracteres_para_producao",
      "Issuer": "CadastroClientesApi",
      "Audience": "CadastroClientesApp",
      "ExpirationMinutes": 60,
      "RefreshTokenExpirationDays": 7
    },
    "Cors": {
      "AllowedOrigins": [ "https://localhost:3000", "https://localhost:3001" ],
      "AllowedMethods": [ "GET", "POST", "PUT", "DELETE", "OPTIONS" ],
      "AllowedHeaders": [ "Content-Type", "Authorization" ],
      "MaxAge": 3600,
      "AllowCredentials": true
    },
    "CardIssuance": {
      "TokenVaultEncryptionKey": "default-dev-key-32-chars-min!!!",
      "BinVisa": "516233",
      "BinMastercard": "453912",
      "ValidityYears": 3
    }
  },
  "RabbitMQ": {
    "HostName": "localhost",
    "Port": 5672,
    "UserName": "guest",
    "Password": "guest",
    "VirtualHost": "/",
    "ConnectionTimeout": 10000,
    "RequestedHeartbeat": 30,
    "MaxRetries": 3,
    "RetryDelay": 1000,
    "AutomaticRecovery": true,
    "DispatchConsumersAsync": true,
    "Queues": {
      "ClienteCadastrado": "cliente.cadastrado",
      "AnaliseCreditoComplete": "analise.credito.complete",
      "CartaoEmissaoPedido": "cartao.emissao.pedido",
      "CartaoEmitido": "cartao.emitido",
      "CartaoEmissaoFalha": "cartao.emissao.falha"
    }
  },
  "Email": {
    "Smtp": {
      "Host": "smtp.gmail.com",
      "Port": 587,
      "UserName": "seu_email@gmail.com",
      "Password": "sua_senha_app",
      "FromEmail": "seu_email@gmail.com",
      "FromName": "Sistema de Emiss\u00e3o de Cart\u00f5es",
      "UseSsl": true,
      "UseStartTls": false,
      "Timeout": 10000,
      "Enabled": false
    }
  },
  "Cache": {
    "Type": "Memory",
    "DefaultExpirationMinutes": 60,
    "SlidingExpirationMinutes": 30
  },
  "Resilience": {
    "Polly": {
      "Enabled": true,
      "Retry": {
        "MaxRetries": 3,
        "BackoffMultiplier": 2.0,
        "InitialDelayMs": 100
      },
      "CircuitBreaker": {
        "Enabled": true,
        "FailureThreshold": 5,
        "SuccessThreshold": 2,
        "TimeoutMs": 30000
      },
      "Timeout": {
        "Enabled": true,
        "TimeoutMs": 30000
      }
    }
  },
  "HealthChecks": {
    "Enabled": true,
    "Endpoint": "/health",
    "DetailedEndpoint": "/health/detailed",
    "Checks": {
      "Database": {
        "Enabled": true,
        "Timeout": 5000
      },
      "RabbitMQ": {
        "Enabled": true,
        "Timeout": 5000
      }
    }
  }
}
